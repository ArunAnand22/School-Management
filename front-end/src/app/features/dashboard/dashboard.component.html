<div class="dashboard-container">
  <!-- Dashboard Header -->
  <div class="dashboard-header">
    <div>
      <h1>Dashboard</h1>
      <p>Welcome back! Here's what's happening today.</p>
    </div>
    <button class="refresh-btn" (click)="refreshData()" title="Refresh data">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M1 4V10H7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M23 20V14H17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10M23 14L18.36 18.36A9 9 0 0 1 3.51 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      Refresh
    </button>
  </div>

  <!-- Statistics Cards -->
  <div class="stats-grid">
    <div *ngFor="let stat of stats" class="stat-card" [style.border-top-color]="stat.color">
      <div class="stat-icon" [style.background]="stat.color + '20'">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path *ngIf="stat.icon === 'school'" d="M5 13.18V17L12 21L19 17V13.18L12 17L5 13.18ZM12 3L1 9L12 15L23 9L12 3Z" fill="currentColor"/>
          <path *ngIf="stat.icon === 'person'" d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z" fill="currentColor"/>
          <path *ngIf="stat.icon === 'book'" d="M18 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V4C20 2.9 19.1 2 18 2ZM6 4H11V12L8.5 10.5L6 12V4Z" fill="currentColor"/>
          <path *ngIf="stat.icon === 'business'" d="M12 7V3H2V21H22V7H12ZM6 19H4V17H6V19ZM6 15H4V13H6V15ZM6 11H4V9H6V11ZM6 7H4V5H6V7ZM10 19H8V17H10V19ZM10 15H8V13H10V15ZM10 11H8V9H10V11ZM10 7H8V5H10V7ZM20 19H12V17H14V15H12V13H14V11H12V9H20V19ZM18 11H16V13H18V11ZM18 15H16V17H18V15Z" fill="currentColor"/>
        </svg>
      </div>
      <div class="stat-content">
        <h3 class="stat-title">{{ stat.title }}</h3>
        <div class="stat-value">{{ stat.value | number }}</div>
        <div class="stat-change" [class.positive]="stat.changeType === 'increase'" [class.negative]="stat.changeType === 'decrease'">
          <svg *ngIf="stat.changeType === 'increase'" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M7 14L12 9L17 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <svg *ngIf="stat.changeType === 'decrease'" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M17 10L12 15L7 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span>{{ stat.change > 0 ? '+' : '' }}{{ stat.change }}%</span>
          <span class="change-label">vs last month</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Charts and Activities Section -->
  <div class="dashboard-content">
    <!-- Enrollment Chart -->
    <div class="chart-card">
      <div class="chart-header">
        <h2>Student Enrollment</h2>
        <div class="period-selector">
          <button 
            *ngFor="let period of ['week', 'month', 'year']"
            [class.active]="selectedPeriod === period"
            (click)="changePeriod(period)"
            class="period-btn"
          >
            {{ period | titlecase }}
          </button>
        </div>
      </div>
      <div class="chart-container">
        <div class="chart-bars">
          <div *ngFor="let data of enrollmentData" class="bar-wrapper">
            <div class="bar-container">
              <div 
                class="bar" 
                [style.height.%]="getBarHeight(data.value)"
                [style.background]="data.color"
                [title]="data.label + ': ' + data.value"
              ></div>
            </div>
            <span class="bar-label">{{ data.label }}</span>
            <span class="bar-value">{{ data.value }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Purchase Chart -->
    <div class="chart-card purchase-chart">
      <div class="chart-header">
        <h2>Purchase Revenue</h2>
        <div class="period-selector">
          <button 
            *ngFor="let period of ['week', 'month', 'year']"
            [class.active]="selectedPurchasePeriod === period"
            (click)="changePurchasePeriod(period)"
            class="period-btn"
          >
            {{ period | titlecase }}
          </button>
        </div>
      </div>
      <div class="chart-container">
        <div class="chart-bars">
          <div *ngFor="let data of purchaseData" class="bar-wrapper">
            <div class="bar-container">
              <div 
                class="bar purchase-bar" 
                [style.height.%]="getPurchaseBarHeight(data.value)"
                [style.background]="data.color"
                [title]="data.label + ': ' + formatCurrency(data.value)"
              ></div>
            </div>
            <span class="bar-label">{{ data.label }}</span>
            <span class="bar-value">{{ formatCurrency(data.value) }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Activities -->
    <div class="activities-card">
      <div class="card-header">
        <h2>Recent Activities</h2>
        <a href="#" class="view-all">View All</a>
      </div>
      <div class="activities-list">
        <div *ngFor="let activity of recentActivities" class="activity-item">
          <div class="activity-icon" [class]="'icon-' + activity.type">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path *ngIf="activity.icon === 'school'" d="M5 13.18V17L12 21L19 17V13.18L12 17L5 13.18ZM12 3L1 9L12 15L23 9L12 3Z" fill="currentColor"/>
              <path *ngIf="activity.icon === 'person'" d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z" fill="currentColor"/>
              <path *ngIf="activity.icon === 'book'" d="M18 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V4C20 2.9 19.1 2 18 2ZM6 4H11V12L8.5 10.5L6 12V4Z" fill="currentColor"/>
              <path *ngIf="activity.icon === 'payment'" d="M20 4H4C2.89 4 2.01 4.89 2.01 6L2 18C2 19.11 2.89 20 4 20H20C21.11 20 22 19.11 22 18V6C22 4.89 21.11 4 20 4ZM20 18H4V8H20V18ZM20 6H4V6H20Z" fill="currentColor"/>
            </svg>
          </div>
          <div class="activity-content">
            <p class="activity-message">{{ activity.message }}</p>
            <span class="activity-time">{{ activity.time }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
